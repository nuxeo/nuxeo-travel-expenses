<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#03a9f4">

  <title>Nuxeo Travel Expenses</title>

  <link rel="icon" sizes="192x192" href="icon.png">

  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild-->

  <!-- build:js bower_components/webcomponentsjs/webcomponents-lite.min.js -->
  <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <!-- endbuild -->

  <!-- build:vulcanized elements/elements.vulcanized.html -->
  <link rel="import" href="elements/elements.html">
  <!-- endbuild-->
</head>
<body unresolved class="fullbleed layout vertical">

<template is="dom-bind" id="app">

  <nx-connection url="/nuxeo"></nx-connection>

  <paper-header-panel flex>

    <paper-toolbar class="medium-tall">
      <paper-icon-button icon="[[toolbarIcon(task)]]" on-tap="back"></paper-icon-button>
      <div class="title">[[toolbarTitle(task)]]</div>
      <paper-icon-button icon="refresh" on-tap="refresh"></paper-icon-button>
      <paper-tabs selected="{{selectedTab}}" valueattr="path" class="fit bottom">
        <paper-tab>MY TASKS</paper-tab>
        <paper-tab>MY REQUESTS</paper-tab>
      </paper-tabs>
    </paper-toolbar>

    <iron-pages selected="[[selectedTab]]">

      <!-- Task List -->
      <nx-task-list class="fit" workflow-model="TravelExpenseValidation" task="{{task}}">

        <!-- Create -->
        <template is="dom-if" if="[[isStep('create',task)]]">
          <paper-icon-item>
            <iron-icon icon="label" item-icon></iron-icon>
            <input is="iron-input" bind-value="{{task.variables.label}}" placeholder="[[i18n('wf.travelExpenses.label')]]" required>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="credit-card" item-icon></iron-icon>
            <input is="iron-input" bind-value="{{task.variables.amount}}" type="number" step="0.01" required></core-input>
            <label>&euro;</label>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="description" item-icon></iron-icon>
            <input is="iron-input" bind-value="{{task.variables.description}}" placeholder="[[i18n('wf.travelExpenses.description')]]"
                   required></core-input>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="work" item-icon></iron-icon>
            <select value="{{task.variables.department::change}}">
              <option value="it">IT</option>
              <option value="financial">Financial</option>
              <option value="marketing">Marketing</option>
              <option value="hr">HR</option>
              <option value="sales">Sales</option>
              <option value="other">Other</option>
            </select>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="store" item-icon></iron-icon>
            <select value="{{task.variables.nature::change}}">
              <option value="transportation">Transportation</option>
              <option value="lunch">Lunch</option>
              <option value="hotel">Hotel</option>
            </select>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="attachment" item-icon></iron-icon>
            <nx-file value="{{task.variables.file}}"></nx-file>
          </paper-icon-item>
        </template>

        <!-- Accept / Reject -->
        <template is="dom-if" if="[[isStep('accept',task)]]">
          <paper-icon-item>
            <iron-icon icon="label" title="[[i18n('wf.travelExpenses.label')]]" item-icon></iron-icon>
            <span>[[task.variables.label]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="credit-card" title="[[i18n('wf.travelExpenses.amount')]]" item-icon></iron-icon>
            <span>[[task.variables.amount]]</span>
            <label>&euro;</label>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="description" title="[[i18n('wf.travelExpenses.description')]]" item-icon></iron-icon>
            <span>[[task.variables.description]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="work" title="[[i18n('wf.travelExpenses.department')]]" item-icon></iron-icon>
            <span>[[task.variables.department]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="store" title="[[i18n('wf.travelExpenses.nature')]]" item-icon></iron-icon>
            <span>[[task.variables.nature]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="attachment" title="[[i18n('wf.travelExpenses.file')]]" item-icon></iron-icon>
            <a href="[[task.variables.file.url]]" target="_blank">[[task.variables.file.name]]</a></span>
          </paper-icon-item>
        </template>

        <!-- Accountancy -->
        <template is="dom-if" if="[[isStep('accountancy',task)]]">
          <paper-icon-item>
            <iron-icon icon="label" item-icon></iron-icon>
            <span>[[task.variables.label]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="credit-card" item-icon></iron-icon>
            <span>[[task.variables.amount]]</span>
            <label>&euro;</label>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="description" item-icon></iron-icon>
            <span>[[task.variables.description]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="work" item-icon></iron-icon>
            <span>[[task.variables.department]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="store" item-icon></iron-icon>
            <span>[[task.variables.nature]]</span>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="label" item-icon></iron-icon>
            <input value="{{task.variables.customer_code}}" placeholder="Customer code" required>
          </paper-icon-item>
          <paper-icon-item>
            <iron-icon icon="attachment" title="[[i18n('wf.travelExpenses.file')]]" item-icon></iron-icon>
            <a href="[[task.variables.file.url]]" target="_blank">[[task.variables.file.name]]</a></span>
          </paper-icon-item>
        </template>
      </nx-task-list>

      <!-- Workflow List -->
      <nx-workflow-list fit workflowModel="TravelExpenseValidation"></nx-workflow-list>

    </iron-pages>

  </paper-header-panel>
</template>

<!-- build:js vendor/jquery.js -->
<script src="bower_components/jquery/dist/jquery.js"></script>
<!-- endbuild-->

<!-- build:js scripts/app.js -->
<script src="scripts/app.js"></script>
<!-- endbuild-->

</body>
</html>
